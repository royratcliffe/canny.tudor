<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Half-duplex socket communication — hdx.sockconn • canny.tudor</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Half-duplex socket communication — hdx.sockconn"><meta property="og:description" content="Writes then reads a socket connection."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">canny.tudor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/pairwise-zipping.html">Pairwise Zipping</a>
    </li>
    <li>
      <a href="../articles/tibble-type.html">Tibble Type</a>
    </li>
    <li>
      <a href="../articles/unzip-raw-binary.html">Unzip Raw Binary</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Half-duplex socket communication</h1>
    
    <div class="hidden name"><code>hdx.sockconn.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Writes then reads a socket connection.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for sockconn</span></span>
<span><span class="fu"><a href="hdx.html">hdx</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">text</span>, write.sep <span class="op">=</span> <span class="st">"\n"</span>, write.useBytes <span class="op">=</span> <span class="cn">FALSE</span>, timeout <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>Socket connection.</p></dd>


<dt>text</dt>
<dd><p>Lines of text to write to the socket connection, a character
vector. Writes all the lines before reading.</p></dd>


<dt>write.sep</dt>
<dd><p>Line separator written after every line of <code>text</code>, a
character string defaulting to a single new-line character <code>"\n"</code>.</p></dd>


<dt>write.useBytes</dt>
<dd><p>Suppresses re-encoding of marked strings.</p></dd>


<dt>timeout</dt>
<dd><p>Seconds to wait for ready socket, a numeric; or wait
indefinitely, <code>NULL</code>.</p></dd>


<dt>...</dt>
<dd><p>Arguments passed on to <code><a href="https://rdrr.io/r/base/scan.html" class="external-link">base::scan</a></code></p><dl><dt><code>file</code></dt>
<dd><p>the name of a file to read data values from.  If the
    specified file is <code>""</code>, then input is taken from the keyboard
    (or whatever <code><a href="https://rdrr.io/r/base/showConnections.html" class="external-link">stdin</a>()</code> reads if input is redirected or
    <span style="R">R</span> is embedded).
    (In this case input can be terminated by a blank line or an EOF
    signal, <samp>Ctrl-D</samp> on Unix and <samp>Ctrl-Z</samp> on Windows.)</p>
<p>Otherwise, the file name is interpreted <em>relative</em> to the
    current working directory (given by <code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a>()</code>),
    unless it specifies an <em>absolute</em> path.
    Tilde-expansion is performed where supported.
    When running <span style="R">R</span> from a script, <code>file = "stdin"</code> can be used to
    refer to the process's <code>stdin</code> file stream.</p>
<p>This can be a compressed file (see <code><a href="https://rdrr.io/r/base/connections.html" class="external-link">file</a></code>).</p>
<p>Alternatively, <code>file</code> can be a <code><a href="https://rdrr.io/r/base/connections.html" class="external-link">connection</a></code>,
    which will be opened if necessary, and if so closed at the end of
    the function call.  Whatever mode the connection is opened in,
    any of LF, CRLF or CR will be accepted as the EOL marker for a line
    and so will match <code>sep = "\n"</code>.</p>
<p><code>file</code> can also be a complete URL.  (For the supported URL
    schemes, see the ‘URLs’ section of the help for
    <code><a href="https://rdrr.io/r/base/connections.html" class="external-link">url</a></code>.)</p>
<p>To read a data file not in the current encoding (for example a
    Latin-1 file in a UTF-8 locale or conversely) use a
    <code><a href="https://rdrr.io/r/base/connections.html" class="external-link">file</a></code> connection setting its <code>encoding</code> argument
    (or <code>scan</code>'s <code>fileEncoding</code> argument).</p></dd>

    <dt><code>what</code></dt>
<dd><p>the <a href="https://rdrr.io/r/base/typeof.html" class="external-link">type</a> of <code>what</code> gives the type of data to
    be read.  (Here ‘type’ is used in the sense of
    <code><a href="https://rdrr.io/r/base/typeof.html" class="external-link">typeof</a></code>.)  The supported types are <code>logical</code>,
    <code>integer</code>, <code>numeric</code>, <code>complex</code>, <code>character</code>,
    <code>raw</code> and <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></code>.  If <code>what</code> is a list, it is
    assumed that the lines of the data file are records each containing
    <code>length(what)</code> items (‘fields’) and the list components
    should have elements which are one of the first six (<a href="https://rdrr.io/r/base/vector.html" class="external-link">atomic</a>)
    types listed or <code>NULL</code>, see section ‘Details’ below.</p></dd>

    <dt><code>nmax</code></dt>
<dd><p>the maximum number of data values to be read, or if
    <code>what</code> is a list, the maximum number of records to be read.  If
    omitted or not positive or an invalid value for an integer
    (and <code>nlines</code> is not set to a positive value), <code>scan</code> will
    read to the end of <code>file</code>.</p></dd>

    <dt><code>n</code></dt>
<dd><p>integer: the maximum number of data values to be read, defaulting to
    no limit.  Invalid values will be ignored.</p></dd>

    <dt><code>sep</code></dt>
<dd><p>by default, scan expects to read ‘white-space’
    delimited input fields.  Alternatively, <code>sep</code> can be used to
    specify a character which delimits fields.  A field is always
    delimited by an end-of-line marker unless it is quoted.</p>
<p>If specified this should be the empty character string (the default)
    or <code>NULL</code> or a character string containing just one single-byte
    character.</p></dd>

    <dt><code>quote</code></dt>
<dd><p>the set of quoting characters as a single character
    string or <code>NULL</code>.  In a multibyte locale the quoting characters
    must be ASCII (single-byte).</p></dd>

    <dt><code>dec</code></dt>
<dd><p>decimal point character.  This should be a character string
    containing just one single-byte character.  (<code>NULL</code> and a
    zero-length character vector are also accepted, and taken as the
    default.)</p></dd>

    <dt><code>skip</code></dt>
<dd><p>the number of  lines of the input file to skip before
    beginning to read data values.</p></dd>

    <dt><code>nlines</code></dt>
<dd><p>if positive, the maximum number of lines of data to be read.</p></dd>

    <dt><code>na.strings</code></dt>
<dd><p>character vector.  Elements of this vector are to be
    interpreted as missing (<code><a href="https://rdrr.io/r/base/NA.html" class="external-link">NA</a></code>) values.  Blank fields are
    also considered to be missing values in logical, integer, numeric
    and complex fields.  Note that the test happens <em>after</em> 
    white space is stripped from the input, so <code>na.strings</code> values 
    may need their own white space stripped in advance.</p></dd>

    <dt><code>flush</code></dt>
<dd><p>logical: if <code>TRUE</code>, <code>scan</code> will flush to the
    end of the line after reading the last of the fields requested.
    This allows putting comments after the last field, but precludes
    putting more that one record on a line.</p></dd>

    <dt><code>fill</code></dt>
<dd><p>logical: if <code>TRUE</code>, <code>scan</code> will implicitly add
    empty fields to any lines with fewer fields than implied by
    <code>what</code>.</p></dd>

    <dt><code>strip.white</code></dt>
<dd><p>vector of logical value(s) corresponding to items
    in the <code>what</code> argument.  It is used only when <code>sep</code> has
    been specified, and allows the stripping of leading and trailing
    ‘white space’ from <code>character</code> fields (<code>numeric</code> fields
    are always stripped).  Note: white space inside quoted strings is
    not stripped.</p>
<p>If <code>strip.white</code> is of length 1, it applies to all fields;
    otherwise, if <code>strip.white[i]</code> is <code>TRUE</code> <em>and</em> the
    <code>i</code>-th field is of mode character (because <code>what[i]</code> is)
    then the leading and trailing unquoted white space from field <code>i</code> is
    stripped.</p></dd>

    <dt><code>quiet</code></dt>
<dd><p>logical: if <code>FALSE</code> (default), scan() will print a
    line, saying how many items have been read.</p></dd>

    <dt><code>blank.lines.skip</code></dt>
<dd><p>logical: if <code>TRUE</code> blank lines in the
    input are ignored, except when counting <code>skip</code> and <code>nlines</code>.</p></dd>

    <dt><code>multi.line</code></dt>
<dd><p>logical.  Only used if <code>what</code> is a list.  If
    <code>FALSE</code>, all of a record must appear on one line (but more than
    one record can appear on a single line).  Note that using <code>fill = TRUE</code>
    implies that a record will be terminated at the end of a line.</p></dd>

    <dt><code>comment.char</code></dt>
<dd><p>character: a character vector of length one
    containing a single character or an empty string.  Use <code>""</code> to
    turn off the interpretation of comments altogether (the default).</p></dd>

    <dt><code>allowEscapes</code></dt>
<dd><p>logical.  Should C-style escapes such as
    <samp>\n</samp> be processed (the default) or read verbatim?   Note that if
    not within quotes these could be interpreted as a delimiter (but not
    as a comment character).</p>
<p>The escapes which are interpreted are the control characters
    <samp>\a, \b, \f, \n, \r, \t, \v</samp> and octal and
    hexadecimal representations like <samp>\040</samp> and <samp>\0x2A</samp>.  Any
    other escaped character is treated as itself, including backslash.
    Note that Unicode escapes (starting <samp>\u</samp> or <samp>\U</samp>: see
    <a href="https://rdrr.io/r/base/Quotes.html" class="external-link">Quotes</a>) are never processed.</p></dd>

    <dt><code>fileEncoding</code></dt>
<dd><p>character string: if non-empty declares the
    encoding used on a file (not a connection nor the keyboard) so the
    character data can be re-encoded.  See the ‘Encoding’ section
    of the help for <code><a href="https://rdrr.io/r/base/connections.html" class="external-link">file</a></code>, and the ‘R Data
      Import/Export Manual’.</p></dd>

    <dt><code>encoding</code></dt>
<dd><p>encoding to be assumed for input strings.  If the
    value is <code>"latin1"</code> or <code>"UTF-8"</code> it is used to mark
    character strings as known to be in Latin-1 or UTF-8: it is not used
    to re-encode the input (see <code>fileEncoding</code>).
    See also ‘Details’.</p></dd>

    <dt><code>skipNul</code></dt>
<dd><p>logical: should nuls be skipped when reading character
    fields?</p></dd>

  
</dl></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The second half of the half-duplex communication, the scan half,
terminates on remote buffer flush, not necessarily on a line termination.
Typically the server side socket <em>will</em> automatically flush when it
sees a line terminator. It could however flush for other reasons, in which
case the scan will complete.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="hdx.html">hdx</a></span><span class="op">(</span><span class="va">con</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hello"</span>, <span class="st">"world"</span><span class="op">)</span>, what <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Roy Ratcliffe.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

